        CIP: 16
        Title: Pluggable Chains
        Authors: John Villar (chiguireitor)
        Status: Pre-Draft
        Type: Standards Track
        Created: 2017-09-13
        Discussions-To:

# Abstract

Enables Counterparty to add additional chains to the consensus algorithm without
breaking compatibility with other chains, effectively making Counterparty a
multichain protocol, furthening its chain agnosticity.

# Motivation

In recent time a lengthy debate has been subject of heated fights between
factions of bitcoin proponents about how to further make it future-proof and
enable greater transaction capacity. This debate revealed several key weaknesses
in the bitcoin ecosystem:

 * Most "core" decisions are made by the developers that are actively developing
 the code, which are the ones paid to do it, which in turn are on the payroll of
 a single business entity.
 * Alternate developer clusters like "cash" and "segwit2x" either suffer from
 bad reputation, commercial collusion like "core" does and/or bad coding skills.
 * Consensus on what is the "main" chain was shaky at times.
 * Fees can wildly change over time and make users spend onerous amounts on
 simple operations like opening a DEX order or creating a token.

Relying on a heavily politicized chain can bring bad reputation to any "child"
or "second layer" applications that depend on on-chain activity. Also, certain
"core" developers have been adamant at best and aggressive at worst to any layer
atop bitcoin that "clutters" the chain (be it from UTXO DB pollution, which is a
real concern, or any other non-technical decisions).

These issues can be mitigated and their impact surface reduced by enabling the
use of other chains for transaction purposes inside Counterparty. However, using
these other chain bring several problems of their own:

 * Most of these alternate chains suffer from low PoW availability, which could
 make 51% attacks more probable.
 * Several other alternate chains are either based off of old code and expose
 their users to pretty well known issues. This means alternate chains must be
 hand picked before inclusion on the consensus via deep evaluation of their
 development team.
 * Replacing the main Counterparty chain by an alternate chain creates a very
 difficult situation on the technical side as federated node operators need to
 sync the chain with one chain and then sync with another chain, deleting the
 previous one and making matters complicated and obtuse.
 * Different teams than the Counterparty foundation and core devs may be
 interested in creating alternate versions of the Counterparty system, creating
 confusion for the end users.
 * These different implementations on different chains dilute the human capital
 available for development for the main Counterparty implementation.

So, with this in mind, letting Counterparty add other chains to the consensus
by accretion, rather than replacement, makes deployment easier, brings different
fee structures to the table and allows people to transact with different block
times depending on preference or advantages. This however doesn't comes without
its own issues:

 * Maintaining multiple chains on a federated node can be resource intensive.
 * Some alt-chain software can bring bugs or even malware as it happened on [1].
 * An alt-chain with low PoW targets can be rewritten and the undolog be
 affected severely from this, making reorgs more complicated.
 * Configuration of these chains pose an additional workload on federated node
 maintainers.
 * These additional chains pose additional workload on code maintainers.

Mitigation of these issues is in order to make pluggable chains a welcome
addition instead of a roadblock for federated node operators.

# Rationale

With the advent of enhanced sends, non-pubkey sends are a reality, so any send
can target any bitcoin-like address with a different version byte than bitcoin.
A user from a bitcoin address could make a send that targets a litecoin or dash
address, and a user from litecoin could in turn target a zcash or decred address
without the need of the parent chains knowing these operations.

Each chain must have a different amount of blocks before being considered secure
for consensus purposes, so "rogue" chains won't break havoc on Counterparty.

# Definitions

# Overview

# Specification

#### Example

# Implementation

# References

[1] "Cryptsy Hacked: Bitcoin Worth $USD 6 Million Stolen" https://www.hackread.com/cryptsy-hacked-bitcoin-worth-usd-6-million-stolen/

## Copyright ##

This document is placed in the public domain.
